<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>CentOS 6.9 移除 home lv 并扩展 root lv &mdash; huntout.me</title><meta name=viewport content="width=device-width, initial-scale=1"><meta property=og:title content="CentOS 6.9 移除 home lv 并扩展 root lv"><meta name=description content="CentOS 6.9 默认安装好后，空余空间都在 home lv 上，如何把空间扩展到 root lv 上？"><meta name=og:description content="CentOS 6.9 默认安装好后，空余空间都在 home lv 上，如何把空间扩展到 root lv 上？"><meta name=twitter:card content=summary><meta name=twitter:site content=@huntout><meta property=og:image content=http://7d9ouh.com1.z0.glb.clouddn.com/2018/01/16/extend-centos-root-logic-volume/centos.56d4.png><meta property=og:url content="http://huntout.me/2018/01/16/extend-centos-root-logic-volume/"><meta property=og:site_name content=huntout.me><meta property=og:type content=article><meta property=og:locale content=zh_CN><meta property=article:published_time content=2018-01-16><!-- Place favicon.ico and apple-touch-icon(s) in the root directory --><!-- rss --><link rel=alternate type=application/atom+xml title=huntout.me href=http://feeds.feedburner.com/huntout><link rel=stylesheet href=http://7d9ouh.com1.z0.glb.clouddn.com/css/main.8cc0.css><script src=http://7d9ouh.com1.z0.glb.clouddn.com/js/head-scripts.d494.js></script></head><body><!--[if lt IE 8]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/" target="_blank">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><div class=body-wrapper><header><h1 class=logo onclick="document.location.href='/'"><a href="/"><img src=http://7d9ouh.com1.z0.glb.clouddn.com/img/logo.a4f1.png alt=huntout.me></a></h1><ul class=navigation><li><a href="/archive/" title="Archive posts">Archive</a></li><li><a href="/tags/" title="Archive posts order by tag">Tags</a></li><li><a href="/about/">About me</a></li></ul></header><div class=shadow><div class=content><div class="post single photo"><h1>CentOS 6.9 移除 home lv 并扩展 root lv</h1><info datetime=2018-01-16>Jan 16, 2018</info><div class=body><h1>问题</h1><p>CentOS 6.9 minimal 按默认安装好后：</p><div class=highlight><pre><code class="text language-text" data-lang=text># df -h

    Filesystem                    Size  Used Avail Use% Mounted on
    /dev/mapper/VolGroup-lv_root   50G  687M   46G   2% /
    tmpfs                          32G     0   32G   0% /dev/shm
    /dev/md126p2                  477M   27M  425M   6% /boot
    /dev/md126p1                  200M  264K  200M   1% /boot/efi
    /dev/mapper/VolGroup-lv_home  790G   69M  750G   1% /home
</code></pre></div><p>空余空间都在 home lv 上，如何把空间扩展到 root lv 上？</p><h1>移除 home lv</h1><div class=highlight><pre><code class="text language-text" data-lang=text># umount /home
# lvchange -an /dev/VolGroup/lv_home
# lvremove /dev/VolGroup/lv_home
# vi /etc/fstab

    /dev/mapper/VolGroup-lv_home /home               ext4    defaults        1 2
    # dd 这一行
</code></pre></div><h1>扩展 root lv</h1><div class=highlight><pre><code class="text language-text" data-lang=text># lvextend -l +100%FREE /dev/VolGroup/lv_root
    Size of logical volume VolGroup/lv_root changed from 50.00 GiB (12800 extents)
    to 852.69 GiB (218289 extents).
    Logical volume lv_root successfully resized.

# lvdisplay

# resize2fs -p /dev/VolGroup/lv_root
    resize2fs 1.41.12 (17-May-2010)
    Filesystem at /dev/VolGroup/lv_root is mounted on /; on-line resizing required
    old desc_blocks = 4, new_desc_blocks = 54
    Performing an on-line resize of /dev/VolGroup/lv_root to 223527936 (4k) blocks.
    The filesystem on /dev/VolGroup/lv_root is now 223527936 blocks long.

# df -h
    Filesystem                      Size  Used Avail Use% Mounted on
    /dev/mapper/VolGroup-lv_root    840G  707M  796G   1% /
    tmpfs                            32G     0   32G   0% /dev/shm
    /dev/md126p2                    477M   27M  425M   6% /boot
    /dev/md126p1                    200M  264K  200M   1% /boot/efi

# reboot
</code></pre></div><p>根据磁盘大小命令 resize2fs 可能会需要很长时间，800G大概需要20分钟，请有耐心一些。</p><p>如果有别的办法可以快一些，敬请留言，谢谢！</p></div><div class=ribbon><div class=rectangle><a href="/2018/01/09/setup-centos-network-and-superuser/" title="CentOS 6.9 配置静态IP与超级用户"><div class=prev><i class="fa fa-angle-left"></i></div></a><div class=curr><div class=link><i class="fa fa-link"></i> <a href="http://huntout.me/2018/01/16/extend-centos-root-logic-volume/">http://huntout.me/2018/01/16/extend-centos-root-logic-volume/</a></div><ul class=tags-box><li><i class="fa fa-tags"></i></li><li><a href=/tags/#centos>centos</a></li></ul></div></div></div><div id=disqus_thread></div><script>var disqus_config = function() {
        this.page.url = 'http://huntout.me/2018/01/16/extend-centos-root-logic-volume/';
        this.page.identifier = '/2018/01/16/extend-centos-root-logic-volume';
    };
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document,
            s = d.createElement('script');
        s.src = 'https://huntout.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div><footer><p><a rel=license href=http://creativecommons.org/licenses/by/4.0 class=cc target=_blank><img src=http://7d9ouh.com1.z0.glb.clouddn.com/img/cc-cc.e30e.png class=cc> <img src=http://7d9ouh.com1.z0.glb.clouddn.com/img/cc-by.abfe.png class=cc></a> This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by/4.0 target=_blank>Creative Commons License</a></p><p>Powered by <a href=http://jekyllrb.com target=_blank>Jekyll</a> &middot; Hosted by <a href=https://github.com/huntout/huntout.github.io target=_blank>GitHub</a></p></footer></div><script src="http://tajs.qq.com/stats?sId=31233320" charset=UTF-8></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47439417-1', 'huntout.me');
  ga('send', 'pageview');</script></body></html>